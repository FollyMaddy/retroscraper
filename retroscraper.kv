#:kivy 2.0
<MainScreen>:
        canvas.before:
                Rectangle:
                        id: backimage
                        pos: self.pos
                        size: self.size
                        texture: app.image_source.texture
        GridLayout:
                size_hint: (1,1)
                size: self.size
                background_color: (0, 0, 0, 0)
                cols : 1
                orientation: 'lr-tb'
                AsyncImage:
                        id: retroscraperimage
                        source: 'http://77.68.23.83/res/logo/retroscraper1.png'
                        size: self.texture_size
                        background_color: (0, 0, 0, 0)
                        size_hint_y: None
                TabbedPanel:
                        do_default_tab: False
                        background_color: (0, 0, 0, 0)
                        tab_width: self.parent.width / 5
                        TabbedPanelItem:
                                id: tabone
                                text: 'Games'
                                font_name: 'sonic.ttf'
                                GridLayout:
                                        size_hint: (1,1)
                                        orientation: 'lr-tb'
                                        cols: 1
                                        GridLayout:
                                                cols:2
                                                size_hint:(1,0.25)
                                                pos_hint: {'top': 1}
                                                Label:
                                                        id: gamelabel
                                                        size_hint: (1,1)
                                                        text: ''
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        markup: True
                                                        valign: 'top'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                Image:
                                                        id: sysImageGame
                                                        color: 0, 0, 0, 0
                                                        size_hint: (1,1)
                                                        allow_stretch: False
                                        GridLayout:
                                                cols:2
                                                size_hint:(1,1)
                                                pos_hint: {'top': 1}
                                                Label:
                                                        id: gamedesc
                                                        size_hint: (1.25,1)
                                                        size: self.size
                                                        halign: 'left'
                                                        #font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text_size: self.size
                                                        valign: 'top'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                Image:
                                                        color: 0, 0, 0, 0
                                                        id: gameimage
                                                        source: ''
                                                        size_hint: (0.75,1)
                                                        allow_stretch: True
                                                        pos_hint: {'top': 1}

                        TabbedPanelItem:
                                id: tabtwo
                                text: 'Systems'
                                font_name: 'sonic.ttf'
                                GridLayout:
                                        size_hint: (1,1)
                                        orientation: 'lr-tb'
                                        cols: 1
                                        Label:
                                                id: availsysLabel
                                                text: 'YOUR AVAILABLE SYSTEMS'
                                                font_name: 'sonic.ttf'
                                                size_hint: (1,0.3)
                                                #valign: 'top'
                                                outline_color: (0,0,0)
                                                outline_width: 1
                                                #pos_hint: {'top': 1}
                                        GridLayout:
                                                id: systemschoice
                                                #pos_hint: {'top': 1}
                                                orientation: 'lr-tb'
                                                cols: 7
                                                size_hint: (1,3)

                                        #HSeparator:
                                        Label:
                                                id: sysLabel
                                                size_hint: (1, 0.3)                        
                                                text: 'System'
                                                font_name: 'sonic.ttf'
                                                font_size: 14
                                                size: self.texture_size
                                                outline_color: (0,0,0)
                                                outline_width: 1
                                                valign: 'bottom'
                                        Image:
                                                id: sysImage
                                                color: 0, 0, 0, 0
                                                size_hint: (1,3)
                        TabbedPanelItem:
                                id: tabthree
                                sysconfig: sysconfig.__self__
                                text: 'Configuration'
                                font_name: 'sonic.ttf'
                                GridLayout:
                                        orientation: 'lr-tb'
                                        cols: 1
                                        #row_force_default:True
                                        #row_default_height: 32
                                        GridLayout:
                                                cols: 1
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                Label:
                                                        id: preflanlabel
                                                        text:'Language preferences'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size

                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 1
                                                Spinner:
                                                        id: langchoice
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        max_height: 30
                                                        on_text: root.selectLang()
                                        HSeparator:
                                        GridLayout:
                                                cols: 1
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                Label:
                                                        id: pathpreflabel
                                                        text:'Paths Preferences'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                sysconfig: sysconfig.__self__
                                                cols: 3
                                                Label:
                                                        id:filesyslabel
                                                        text: 'SYSTEMS FILE:'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        #text_size: (200,32)
                                                        size: self.texture_size
                                                        size_hint: (.5,1)
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "right"
                                                        valign: "middle"
                                                TextInput:
                                                        id: systemsfile
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text: ''
                                                Button:
                                                        id:sysconfig
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text: 'Select File'
                                                        #background_normal: ''
                                                        on_press: root.show_load()
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 5
                                                Label:
                                                        id:sysrompathlabel
                                                        text: 'systems rom path:'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                                        text_size: self.size
                                                        halign: "right"
                                                        valign: "middle"
                                                TextInput:
                                                        id:esrompath
                                                        text: ''
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size: (400,32)
                                                        size_hint:(None,1)
                                                Label:
                                                        id: maptopathlabel
                                                        text: 'Map to Path:'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                                        text_size: self.size
                                                        halign: "right"
                                                        valign: "middle"
                                                TextInput:
                                                        id:maptopath
                                                        text: ''
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        multiline: False
                                                        on_text_validate: root.update_map()
                                                Button:
                                                        id:selrompath
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text: "Select Directory"
                                                        on_release: root.show_dir_select()               
                                        HSeparator:
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 1
                                                Label:
                                                        id: gamedecorlabel
                                                        size_hint:(1,1)
                                                        text:'game name decorators (taken from filename)'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                        GridLayout:
                                                cols: 8
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: versionmod
                                                        on_press:root.doDecorator('version')
                                                Label:
                                                        id: versiondeclabel
                                                        text:'Add Version [Sonic V1.1]'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        id: countrymod
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        on_press:root.doDecorator('country')
                                                Label:
                                                        id: countrydeclabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        text:'Add country [Sonic (USA)]'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        id: hackmod
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        on_press:root.doDecorator('hack')
                                                Label:
                                                        id: hackdeclabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        text:'Add hack [Sonic (hack)]'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        id: diskmod
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        on_press:root.doDecorator('disk')
                                                Label:
                                                        id: diskdeclabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        text:'Add Disk/Tape number decorators [Sonic (Disk 1/2)]'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                        HSeparator:
                                        GridLayout:
                                                cols: 1
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                Label:
                                                        id: mediapreflabel
                                                        text:'Download Media Preferences'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 4
                                                CheckBox:
                                                        id: preferbox
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        on_press:root.doBoxes()
                                                Label:
                                                        id: preferboxlabel
                                                        size_hint:(1,1)
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Download box game instead of screenshot'
                                                        outline_color: (0,0,0)
                                                        size: self.texture_size
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        id: novideodown
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        on_press:root.doVideos()
                                                Label:
                                                        id: novideodownlabel
                                                        size: self.texture_size
                                                        size_hint:(1,1)
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Do not download video'
                                                        outline_color: (0,0,0)
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                        outline_width: 1
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 4
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: bezeldown
                                                        on_press:root.doBezels('game')
                                                Label:
                                                        size_hint:(1,1)
                                                        size: self.texture_size
                                                        id: bezeldownlabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Download Game Bezels'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: sysbezeldown
                                                        on_press:root.doBezels('system')
                                                Label:
                                                        size: self.texture_size
                                                        size_hint:(1,1)
                                                        id: sysbezellabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Download system bezel if game bezel not present'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                        HSeparator:
                                        GridLayout:
                                                cols: 1
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                Label:
                                                        id: otherpreflabel
                                                        text:'Other Preferences'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        size_hint:(1,1)
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        size: self.texture_size
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 4
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: cleanmedia
                                                        on_press:root.doClean()
                                                Label:
                                                        size_hint:(1,1)
                                                        id: cleanmedialabel
                                                        size: self.texture_size
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Clean media directories before downloading'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: optimizemedia
                                                        #on_press:root.doCleanMedia('')
                                                Label:
                                                        size_hint:(1,1)
                                                        size: self.texture_size
                                                        id: optimizemedialabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Optimize media by creating links (slow)'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 4
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: usegoogle
                                                        on_press: root.toggleUseGoogle('bah')
                                                Label:
                                                        size_hint:(1,1)
                                                        id:usegooglelab
                                                        size: self.texture_size
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Use google translate'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: keepdata
                                                        on_press: root.toggleKeepData('bah')
                                                Label:
                                                        size_hint:(1,1)
                                                        size: self.texture_size
                                                        id: keepdatalabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'KEEP FAVORITES/PLAY COUNTS'
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 4
                                                CheckBox:
                                                        id: dobackup
                                                        on_press: root.toggleDoBackup('bah')
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                Label:
                                                        id: backuplabel
                                                        size: self.texture_size
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'DO NOT BACKUP GAMELIST FILE'
                                                        outline_color: (0,0,0)
                                                        size_hint:(1,1)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: usedb
                                                        on_press: root.toggleUseDB('bah')
                                                Label:
                                                        size_hint:(1,1)
                                                        size: self.texture_size
                                                        id:usedblabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Use local DB for hashes'
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                        GridLayout:
                                                orientation: 'lr-tb'
                                                row_force_default:True
                                                row_default_height: 32
                                                cols: 4
                                                CheckBox:
                                                        id: domissfile
                                                        on_press: root.toggleDomissfile('bah')
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                Label:
                                                        id: domissfilelabel
                                                        size: self.texture_size
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'CREATE MISSING LIST'
                                                        outline_color: (0,0,0)
                                                        size_hint:(1,1)
                                                        outline_width: 1
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                CheckBox:
                                                        size:(32,0)
                                                        size_hint:(None,1)
                                                        id: downmissing
                                                        on_press: root.toggledownmissing('bah')
                                                Label:
                                                        size_hint:(1,1)
                                                        size: self.texture_size
                                                        id:downmissinglabel
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        text:'Try to download missing files'
                                                        text_size: self.size
                                                        halign: "left"
                                                        valign: "middle"
                                                        outline_color: (0,0,0)
                                                        outline_width: 1
                                        HSeparator:
                        TabbedPanelItem:
                                id: tabremote
                                text: 'Remote'
                                font_name: 'sonic.ttf'
                                ScrollView:
                                        scroll_type: ['bars']
                                        bar_width: 10
                                        GridLayout:
                                                id:tochange
                                                size_hint_y:None
                                                cols: 1
                                                Button:
                                                        id: remoteScan
                                                        text: 'Look for remote systems'
                                                        font_name: 'sonic.ttf'
                                                        font_size: 14
                                                        on_release: root.remoteScan()
                                                        size_hint: 1,None
                                                        disabled: False
                                                        size: 25,25

                        TabbedPanelItem:
                                id: taberror
                                text: 'Errors'
                                font_name: 'sonic.ttf'
                                ScrollView:
                                        scroll_type: ['bars']
                                        bar_width: 10
                                        GridLayout:
                                                id:errorgrid
                                                size_hint_y:None
                                                cols: 1
                GridLayout
                        cols : 1
                        orientation: 'lr-tb'
                        size:1200,20
                        size_hint:1,None
                        ProgressBar:
                                id: scrapPB
                                size_hint_x: 1
                                size_hint_y: None
                                height: 30

                GridLayout
                        orientation: 'lr-tb'
                        cols: 2
                        size:1200,25
                        size_hint:1,None
                        Button:
                                id: startScraping
                                text: 'Waiting for proper configuration'
                                font_name: 'sonic.ttf'
                                font_size: 14
                                on_release: root.ScanToggle()
                                size_hint: 1,None
                                disabled: True
                                size: 25,25

<LoadDialog>:
        BoxLayout:
                id:loadroot
                size: root.size
                pos: root.pos
                orientation: "vertical"
                FileBrowser:
                        id: filechooser
                        #filters: ['*.cfg']
                        on_success: root.load(filechooser.path, filechooser.selection)
                        on_canceled: root.cancel()
<MyPopup>:
        title_font: 'sonic.ttf'
        title_size: 14
        BoxLayout:
                id: popupbox
                size: root.size
                pos: root.pos
                orientation: 'vertical'
                cols: 1
                Label:
                        id: popuplabel
                        text: 'TEST LABEL'
                        font_name: 'sonic.ttf'
                        font_size: 12
                        size_hint_y: 0.5
                        text_size: self.width, None
                        height: self.texture_size[1]
                Button:
                        id:okpopupbutton
                        font_name: 'sonic.ttf'
                        font_size: 14
                        text: 'Got It!'
                        on_release: root.cancel()
                        size_hint: (1,None)
                        size: (1,30)

<HSeparator@Widget>:
        canvas:
                Color:
                        rgba: 1, 1, 1, 1
                Rectangle:
                        pos: self.pos
                        size: self.size
        size_hint_y: None
        height: dp(2)

<VSeparator@Widget>:
        canvas:
                Color:
                        rgba: 1, 1, 1, 1
                Rectangle:
                        pos: self.pos
                        size: (parent.width,2)
        size_hint_x: None
        width: dp(2)

#<Widget>:
#        canvas.after:
#                Line:
#                        rectangle: self.x+1,self.y+1,self.width-1,self.height-1
#                        dash_offset: 5
#                        dash_length: 3
